<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>&lt;div&gt;Deploy a NodeJS Express app with GitLab&#39;s Cloud Run integration&lt;/div&gt;</title>
	
	
	<link rel="stylesheet" href="/css/style.css">
	
	
</head>
<body>
	<header>
	==========================<br>
	== <a href="https://ghariib.ir/">Gharib Personal Blog</a> ==<br>
	==========================
	<div style="float: right;">A Techi Personal Blog</div><br>
	<p>
	<nav>
			<a href="/"><b>Start</b></a>.
			
			
			<a href="/posts/"><b>Posts</b></a>.
			
			<a href="/categories/"><b>Categories</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
	</nav>
	</p>
	
</header>

	
	<main>
		<article>
			<h1>&lt;div&gt;Deploy a NodeJS Express app with GitLab&#39;s Cloud Run integration&lt;/div&gt;</h1>
			<b><time>15.01.2025 00:00</time></b>
		       
		           <a href="/tags/development">development</a>
        	       
		           <a href="/tags/git">git</a>
        	       
		           <a href="/tags/github">github</a>
        	       
		           <a href="/tags/gitlab">gitlab</a>
        	       
		           <a href="/tags/software">software</a>
        	       

			<div>
				<p>Are you looking to deploy your NodeJS app to Google Cloud with the least maintenance possible? This tutorial will show you how to utilize GitLab’s Google Cloud integration to deploy your NodeJS app in less than 10 minutes.</p>
<p>Traditionally, deploying an application often requires assistance from production or DevOps engineers. This integration now empowers developers to handle deployments independently. Whether you’re a solo developer or part of a large team, this setup gives everyone the ability to deploy their applications efficiently.</p>
<h2 id="overview">Overview</h2>
<ul>
<li>Create a new project in GitLab</li>
<li>Set up your NodeJS application</li>
<li>Use the Google Cloud integration to create a Service account</li>
<li>Use the Google Cloud integration to configure Cloud Run via Merge Request</li>
<li>Enjoy your newly deployed Java Spring Boot app</li>
<li>Follow the cleanup guide</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Owner access on a Google Cloud Platform project</li>
<li>Working knowledge of JavaScript/TypeScript (not playing favorites here!)</li>
<li>Working knowledge of GitLab CI</li>
<li>10 minutes</li>
</ul>
<h2 id="step-by-step-guide">Step-by-step guide</h2>
<h3 id="1-create-a-new-project-in-gitlab">1. Create a new project in GitLab</h3>
<p>We decided to call our project <code>nodejs–express-cloud-run</code> for simplicity.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/58du8DdOUEqAOpwTOkbHGQ/8a1a793aeae9babd9042c59ed2e13e71/image1.png" alt="Create a new project" />
</figure>


</p>
<h3 id="2-upload-your-nodejs-app-or-use-this-example-to-get-started">2. Upload your NodeJS app or use this example to get started.</h3>
<p>Demo</p>
<p><strong>Note:</strong> Make sure to include the <code>cloud-run</code> CI template within your project.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/3BeRRhtMDzTMhrjCTcWwkw/bdebb221bf688c8a7810d1d7eeadba65/image6.png" alt="cloud-run CI template include" />
</figure>


</p>
<h3 id="3-use-the-google-cloud-integration-to-create-a-service-account">3. Use the Google Cloud integration to create a Service account.</h3>
<p>Navigate to <strong>Operate &gt; Google Cloud &gt; Create Service account</strong>.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/1nekQNPGU3RbPKQyUDwFsN/76c448239122fa0a9951544373395302/image10.png" alt="Create Service account screen" />
</figure>


</p>
<p>Also configure the region you would like the Cloud Run instance deployed to.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/2BRD9frHRugvFm54nGLC3J/8caa584233eb372b84df0f6f5611727d/image2.png" alt="Cloud Run instance deployment region selection" />
</figure>


</p>
<h3 id="4-go-to-the-deployments-tab-and-use-the-google-cloud-integration-to-configure-cloud-run-via-merge-request">4. Go to the Deployments tab and use the Google Cloud integration to configure <strong>Cloud Run via Merge Request</strong>.</h3>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/4A78xJvstOZudEljO3dxFn/8f250dca0a8d57fc4c5256d14141e792/image5.png" alt="Deployments - Configuration of Cloud Run via Merge Request" />
</figure>


</p>
<p>This will open a merge request – immediately merge it.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/7l7jg8eL9bAWwOvnH9w4JY/8fa24ef53d76ff4e806b8dcb3388bfe6/image8.png" alt="Merge request for deployment" />
</figure>


</p>
<p><strong>Note:</strong> <code>GCP_PROJECT_ID</code>, <code>GCP_REGION</code>, <code>GCP_SERVICE_ACCOUNT</code>, and <code>GCP_SERVICE_ACCOUNT_KEY</code> will all be automatically populated from the previous steps.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/2c4MdEkUU0ygyB1bosE5HP/b630fb43eaac5aafa4ae519baf332907/image4.png" alt="Variables listing" />
</figure>


</p>
<h3 id="5-voila-check-your-pipeline-and-you-will-see-you-have-successfully-deployed-to-google-cloud-run-using-gitlab-ci">5. Voila! Check your pipeline and you will see you have successfully deployed to Google Cloud Run using GitLab CI.</h3>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/2qyph9FGS71wGpMt2eJ7ZX/c2c13275937c2576d7dffd143203b430/image3.png" alt="Successful deployment to Google Cloud Run" />
</figure>


</p>
<p>Click the Service URL to view your newly deployed Node server.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/36o64dX1H8ijuNbpiXCf9L/3ada79b96d570dbd57739c41c1324368/image7.png" alt="View newly deployed Node server" />
</figure>


</p>
<p>In addition, you can navigate to <strong>Operate &gt; Environments</strong> to see a list of deployments for your environments.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/5M8Iy1yxkF3vatHc6htkBV/5eacb4762df8183a8eb07514c7dbaa12/image12.png" alt="Environments view of deployment list" />
</figure>


</p>
<p>By clicking on the environment called <code>main</code>, you’ll be able to view a complete list of deployments specific to that environment.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/6byXvhfYCnbysIlMZ48Ejz/41aab96d281a43d75409636c449ec396/image9.png" alt="Main view of deployments to specific environment" />
</figure>


</p>
<h3 id="6-next-steps">6. Next steps</h3>
<p>To get started with developing your Node application, try adding another endpoint. For instance, in your <code>index.js</code> file, you can add a <strong>/bye</strong> endpoint as shown below:</p>
<pre tabindex="0"><code>app.get(&#39;/bye&#39;, (req, res) =&gt; {
  res.send(`Have a great day! See you!`);
});
</code></pre><p>Push the changes to the repo, and watch the <code>deploy-to-cloud-run</code> job deploy the updates. Once it’s complete, go back to the Service URL and navigate to the <strong>/bye</strong> endpoint to see the new functionality in action.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/1Wao8In9CGlte4CtnzzRPm/607a3c11a070a57815ad05b6988245ef/image11.png" alt="Bye message" />
</figure>


</p>
<h2 id="follow-the-cleanup-guide">Follow the cleanup guide</h2>
<p>To prevent incurring charges on your Google Cloud account for the resources used in this tutorial, you can either delete the specific resources or delete the entire Google Cloud project. For detailed instructions, refer to the cleanup guide here.</p>
<blockquote>
<p>Read more of these helpful tutorials from GitLab solutions architects.</p></blockquote>
<p>Are you looking to deploy your NodeJS app to Google Cloud with the least maintenance possible? This tutorial will show you how to utilize GitLab’s Google Cloud integration to deploy your NodeJS app in less than 10 minutes.</p>
<p>Traditionally, deploying an application often requires assistance from production or DevOps engineers. This integration now empowers developers to handle deployments independently. Whether you’re a solo developer or part of a large team, this setup gives everyone the ability to deploy their applications efficiently.</p>
<h2 id="overview-1">Overview</h2>
<ul>
<li>Create a new project in GitLab</li>
<li>Set up your NodeJS application</li>
<li>Use the Google Cloud integration to create a Service account</li>
<li>Use the Google Cloud integration to configure Cloud Run via Merge Request</li>
<li>Enjoy your newly deployed Java Spring Boot app</li>
<li>Follow the cleanup guide</li>
</ul>
<h2 id="prerequisites-1">Prerequisites</h2>
<ul>
<li>Owner access on a Google Cloud Platform project</li>
<li>Working knowledge of JavaScript/TypeScript (not playing favorites here!)</li>
<li>Working knowledge of GitLab CI</li>
<li>10 minutes</li>
</ul>
<h2 id="step-by-step-guide-1">Step-by-step guide</h2>
<h3 id="1-create-a-new-project-in-gitlab-1">1. Create a new project in GitLab</h3>
<p>We decided to call our project <code>nodejs–express-cloud-run</code> for simplicity.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/58du8DdOUEqAOpwTOkbHGQ/8a1a793aeae9babd9042c59ed2e13e71/image1.png" alt="Create a new project" />
</figure>


</p>
<h3 id="2-upload-your-nodejs-app-or-use-this-example-to-get-started-1">2. Upload your NodeJS app or use this example to get started.</h3>
<p>Demo</p>
<p><strong>Note:</strong> Make sure to include the <code>cloud-run</code> CI template within your project.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/3BeRRhtMDzTMhrjCTcWwkw/bdebb221bf688c8a7810d1d7eeadba65/image6.png" alt="cloud-run CI template include" />
</figure>


</p>
<h3 id="3-use-the-google-cloud-integration-to-create-a-service-account-1">3. Use the Google Cloud integration to create a Service account.</h3>
<p>Navigate to <strong>Operate &gt; Google Cloud &gt; Create Service account</strong>.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/1nekQNPGU3RbPKQyUDwFsN/76c448239122fa0a9951544373395302/image10.png" alt="Create Service account screen" />
</figure>


</p>
<p>Also configure the region you would like the Cloud Run instance deployed to.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/2BRD9frHRugvFm54nGLC3J/8caa584233eb372b84df0f6f5611727d/image2.png" alt="Cloud Run instance deployment region selection" />
</figure>


</p>
<h3 id="4-go-to-the-deployments-tab-and-use-the-google-cloud-integration-to-configure-cloud-run-via-merge-request-1">4. Go to the Deployments tab and use the Google Cloud integration to configure <strong>Cloud Run via Merge Request</strong>.</h3>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/4A78xJvstOZudEljO3dxFn/8f250dca0a8d57fc4c5256d14141e792/image5.png" alt="Deployments - Configuration of Cloud Run via Merge Request" />
</figure>


</p>
<p>This will open a merge request – immediately merge it.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/7l7jg8eL9bAWwOvnH9w4JY/8fa24ef53d76ff4e806b8dcb3388bfe6/image8.png" alt="Merge request for deployment" />
</figure>


</p>
<p><strong>Note:</strong> <code>GCP_PROJECT_ID</code>, <code>GCP_REGION</code>, <code>GCP_SERVICE_ACCOUNT</code>, and <code>GCP_SERVICE_ACCOUNT_KEY</code> will all be automatically populated from the previous steps.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/2c4MdEkUU0ygyB1bosE5HP/b630fb43eaac5aafa4ae519baf332907/image4.png" alt="Variables listing" />
</figure>


</p>
<h3 id="5-voila-check-your-pipeline-and-you-will-see-you-have-successfully-deployed-to-google-cloud-run-using-gitlab-ci-1">5. Voila! Check your pipeline and you will see you have successfully deployed to Google Cloud Run using GitLab CI.</h3>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/2qyph9FGS71wGpMt2eJ7ZX/c2c13275937c2576d7dffd143203b430/image3.png" alt="Successful deployment to Google Cloud Run" />
</figure>


</p>
<p>Click the Service URL to view your newly deployed Node server.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/36o64dX1H8ijuNbpiXCf9L/3ada79b96d570dbd57739c41c1324368/image7.png" alt="View newly deployed Node server" />
</figure>


</p>
<p>In addition, you can navigate to <strong>Operate &gt; Environments</strong> to see a list of deployments for your environments.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/5M8Iy1yxkF3vatHc6htkBV/5eacb4762df8183a8eb07514c7dbaa12/image12.png" alt="Environments view of deployment list" />
</figure>


</p>
<p>By clicking on the environment called <code>main</code>, you’ll be able to view a complete list of deployments specific to that environment.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/6byXvhfYCnbysIlMZ48Ejz/41aab96d281a43d75409636c449ec396/image9.png" alt="Main view of deployments to specific environment" />
</figure>


</p>
<h3 id="6-next-steps-1">6. Next steps</h3>
<p>To get started with developing your Node application, try adding another endpoint. For instance, in your <code>index.js</code> file, you can add a <strong>/bye</strong> endpoint as shown below:</p>
<pre tabindex="0"><code>app.get(&#39;/bye&#39;, (req, res) =&gt; {
  res.send(`Have a great day! See you!`);
});
</code></pre><p>Push the changes to the repo, and watch the <code>deploy-to-cloud-run</code> job deploy the updates. Once it’s complete, go back to the Service URL and navigate to the <strong>/bye</strong> endpoint to see the new functionality in action.</p>
<p>
<figure>
  <img src="https://images.ctfassets.net/r9o86ar0p03f/1Wao8In9CGlte4CtnzzRPm/607a3c11a070a57815ad05b6988245ef/image11.png" alt="Bye message" />
</figure>


</p>
<h2 id="follow-the-cleanup-guide-1">Follow the cleanup guide</h2>
<p>To prevent incurring charges on your Google Cloud account for the resources used in this tutorial, you can either delete the specific resources or delete the entire Google Cloud project. For detailed instructions, refer to the cleanup guide here.</p>
<blockquote>
<p>Read more of these helpful tutorials from GitLab solutions architects.</p></blockquote>
<p>Go to Source</p>

			</div>
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/2025-03-22-cve-2025-2618---d-link-dap-1620-heap-ba/">CVE-2025-2618 - D-Link DAP-1620 Heap-Based Buffer Overflow Vulnerability</a></li>
				
				<li><a href="/posts/2025-03-22-cve-2025-2619---d-link-dap-1620-stack-b/">CVE-2025-2619 - D-Link DAP-1620 Stack-Based Buffer Overflow Vulnerability</a></li>
				
				<li><a href="/posts/2025-03-22-cve-2025-2186---funnelkit-woocommerce-s/">CVE-2025-2186 - FunnelKit WooCommerce SQL Injection</a></li>
				
				<li><a href="/posts/2025-03-22-cve-2025-2617---yangyouwang-crud-cross-/">CVE-2025-2617 - Yangyouwang Crud Cross-Site Scripting Vulnerability</a></li>
				
				<li><a href="/posts/2025-03-22-cve-2025-26796---apache-oozie-cross-sit/">CVE-2025-26796 - Apache Oozie Cross-site Scripting Vulnerability</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p>&copy; 2025 <a href="https://ghariib.ir/"><b>Alireza Gharib. All right reserved</b></a>.
	<a href="https://github.com/Gharib110"><b>Github</b></a>.
	</p>
</footer>

</body>
</html>
