<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>How we used Flask and 12-factor charms to simplify Canonical.com development</title>
	
	
	<link rel="stylesheet" href="/css/style.css">
	
	
</head>
<body>
	<header>
	==========================<br>
	== <a href="https://ghariib.ir/">Gharib Personal Blog</a> ==<br>
	==========================
	<div style="float: right;">A Techi Personal Blog</div><br>
	<p>
	<nav>
			<a href="/"><b>Start</b></a>.
			
			
			<a href="/posts/"><b>Posts</b></a>.
			
			<a href="/categories/"><b>Categories</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
	</nav>
	</p>
	
</header>

	
	<main>
		<article>
			<h1>How we used Flask and 12-factor charms to simplify Canonical.com development</h1>
			<b><time>10.01.2025 00:00</time></b>
		       

			<div>
				<p>Our latest Canonical website rebrand did not just bring the new Vanilla-based frontend, it also saw the introduction of Python Flask as the preferred web framework. Flask provides a good foundation for building new applications using the 12-factor methodology, effectively increasing our web team’s speed and efficiency in adding new features.</p>
<p>Because our web team works on both the website and the product’s UI we decided to take operational improvements one step further by providing a way to stand up in a few simple commands a fully integrated and observable Kubernetes environment for their Flask apps. Our solution, called 12-factor charms, provides an easy to use abstraction layer over existing Canonical products and it is aimed at application developers who create applications based on the 12-factor methodology.</p>
<p>As part of this blog post we will introduce the 12 factor charms in the context of the Flask, however the same also applies to 12-factor applications that are built using the following frameworks:</p>
<ul>
<li>Django</li>
<li>FastAPI</li>
<li>Go</li>
<li>Spring Boot (coming soon)</li>
</ul>
<p>Let’s explore how you can use 12-factor charms to get a fully integrated and observable Kubernetes environment for Flask apps in a few simple commands.</p>
<h2 id="the-foundations-juju-charms-and-rocks">The foundations: juju, charms and rocks</h2>
<p>The 12-factor charm solution uses and combines capabilities in the following Canonical products:</p>
<ul>
<li>Juju is an open source orchestration engine for software operators that enables the deployment, integration and lifecycle management of applications at any scale, on any infrastructure using charms.</li>
<li>A charm is an operator – business logic encapsulated in reusable software packages that automate every aspect of an application’s life.</li>
<li>Charmcraft is a CLI tool that makes it easy and quick to initialise, package, and publish Kubernetes and machine charms.</li>
<li>Rockcraft is a tool to create rocks – a new generation of secure, stable and OCI-compliant container images, based on Ubuntu.</li>
</ul>
<p>More specifically a Rockcraft framework (conceptually similar to a snap extension) is initially used to facilitate the creation of a well structured, minimal and hardened container image, called a rock. A Charmcraft profile can then be leveraged to add a software operator (charm) around the aforementioned container image.</p>
<p>Encapsulating the original Flask application in a charm allows it to benefit from the entire charm ecosystem, meaning that the app can be connected to a database, e.g. an HA Postgres, observed through a Grafana based observability stack, get ingress and much more.</p>
<h2 id="creating-a-complete-development-environment-in-a-few-commands">Creating a complete development environment in a few commands</h2>
<p>Rockcraft and Charmcraft now natively support Flask. Production ready OCI images for Flask applications can be created using Rockcraft with 3 easy commands that need to be run in the root directory of the Flask application:</p>
<pre tabindex="0"><code>sudo snap install rockcraft --classic
rockcraft init --profile flask-framework
rockcraft pack
</code></pre><p>The full getting started tutorial for creating an OCI image for a Flask application takes you from a plain Ubuntu installation to a production ready OCI image for your Flask application. Using this tooling, the web development team was able to streamline the creation of their OCI images, speeding up their development and reducing maintenance effort.</p>
<p>Charmcraft now also natively supports Flask. The web development team is using it to create charms that automate every aspect of their Flask application’s life, including integrating with a database, preparing the tables in the database, integrating with observability and exposing the application using ingress. From the root directory of the Flask application, the Flask application charm can be created using 4 easy commands:</p>
<pre tabindex="0"><code>mkdir charm &amp; cd charm
sudo snap install charmcraft --classic
charmcraft init --profile flask-framework
charmcraft pack
</code></pre><p>The full getting started tutorial for creating a charm for a Flask application takes you from a plain Ubuntu installation to deploying the Flask application on Kubernetes, exposing it using ingress and integrating it with a database.</p>
<h2 id="learn-more-about-juju-rockraft-and-12-factor-charms">Learn more about Juju, Rockraft and 12 factor charms</h2>
<ul>
<li>Juju documentation </li>
<li>Rockcraft documentation</li>
</ul>
<p>Go to Source</p>

			</div>
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/desktop-4-39-smarter-ai-agent-docker-desktop-cli-in-ga-and-effortless-multi-platform-builds/">Desktop 4.39: Smarter AI Agent, Docker Desktop CLI in GA, and Effortless Multi-Platform Builds</a></li>
				
				<li><a href="/posts/docker-engine-v28-hardening-container-networking-by-default/">Docker Engine v28: Hardening Container Networking by Default</a></li>
				
				<li><a href="/posts/file-system-navigation-first-steps-in-the-terminal-part-1-of-5-of-the-terminal-techniques-for-you-tty-making-linux-security-accessible-blog-series/">File System Navigation: First Steps in the Terminal - Part 1 of 5 of the Terminal Techniques for You (TTY): Making Linux Security Accessible Blog Series</a></li>
				
				<li><a href="/posts/leveraging-docker-with-tensorflow-models-tensorflow-js-for-a-snake-ai-game/">Leveraging Docker with TensorFlow Models &amp;amp; TensorFlow.js for a Snake AI Game</a></li>
				
				<li><a href="/posts/powered-by-docker-streamlining-engineering-operations-as-a-platform-engineer/">Powered by Docker: Streamlining Engineering Operations as a Platform Engineer</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p>&copy; 2025 <a href="https://ghariib.ir/"><b>Alireza Gharib. All right reserved</b></a>.
	<a href="https://github.com/Gharib110"><b>Github</b></a>.
	</p>
</footer>

</body>
</html>
