<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>Kali Linux On The New Modern WSL</title>
	
	
	<link rel="stylesheet" href="/css/style.css">
	
	
</head>
<body>
	<header>
	==========================<br>
	== <a href="https://ghariib.ir/">Gharib Personal Blog</a> ==<br>
	==========================
	<div style="float: right;">A Techi Personal Blog</div><br>
	<p>
	<nav>
			<a href="/"><b>Start</b></a>.
			
			
			<a href="/posts/"><b>Posts</b></a>.
			
			<a href="/categories/"><b>Categories</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
	</nav>
	</p>
	
</header>

	
	<main>
		<article>
			<h1>Kali Linux On The New Modern WSL</h1>
			<b><time>28.01.2025 00:00</time></b>
		       

			<div>
				<h1 id="kali-linux-on-the-new-modern-wsl">Kali Linux On The New Modern WSL</h1>
<p><a href="https://www.kali.org/blog/kali-linux-modern-wsl/images/kali-linux-modern-wsl.jpg">https://www.kali.org/blog/kali-linux-modern-wsl/images/kali-linux-modern-wsl.jpg</a>
<!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p>With the assistance of Microsoft’s WSL team, we are proud to say that we were the first Linux distro to be accepted onto this new modern distribution list. In this blog post we will cover the journey and share how you can try out this new architecture, but if you are just looking for the hands on portion then please see <a href="https://www.kali.org/blog/kali-linux-modern-wsl/#how-you-can-test-this-new-wsl">here</a>.</p>
<h2 id="kali-and-wsls-history">Kali and WSL’s history</h2>
<p>Kali has had a long history of active support for WSL and the team running it. When we first got the email about the new distribution architecture and how it would be used, we were very interested in it.</p>
<p>For those who aren’t familiar with how WSL works, previously it took a few steps for us to get a new version onto the Microsoft store:</p>
<ul>
<li>First we would have to build the root filesystem (rootfs) and compress it into a tarball. This is done through our <a href="https://gitlab.com/kalilinux/build-scripts/kali-wsl-rootfs">build script</a> and can be done on most systems and OSs.</li>
<li>After we have our compressed rootfs we would need to move it to a Windows system that has Visual Studio installed and configured for our needs. For a bit more information on this configuration, please see our <a href="https://gitlab.com/kalilinux/build-scripts/kali-wsl-app">readme in our GitLab</a>.</li>
<li>Once we have Visual Studio set up and configured correctly, we would have to import the compressed rootfs and begin building the app. This is as easy as clicking a few buttons after you have it initially configured and know the output is good.</li>
<li>From here we then upload the build app bundle to Microsoft’s store, which then needs to be reviewed and approved.</li>
</ul>
<p>Overall, not a long or taxing process. However, with the new distribution architecture all of this can be cut down into just two steps.</p>
<ul>
<li>Build the rootfs.</li>
<li>Create a merge request to <a href="https://github.com/microsoft/WSL/pull/12472">Microsoft’s WSL GitHub</a> updating the distribution info list.</li>
</ul>
<p>In fact, if we so chose, we could actually just build the rootfs and allow users to download the file and use it themselves. But why is this?</p>
<h2 id="the-new-wsl-modern-distribution-architecture">The new WSL modern distribution architecture</h2>
<p>This new architecture comes along with some new files that are used. These files, which are included in the rootfs, indicate to WSL what to do with the tarball. These files include information such as the Linux distribution’s name, icon, user settings, and even what should be done on first boot.</p>
<p>With these files in place, WSL is able to import the rootfs tarball directly and get the WSL distro properly installed and configured. And if you are on a certain version of WSL or later (currently only available in pre-release) you will be able to double-click on any <code>.wsl</code> extension tarball and instantly install that WSL distro.</p>
<p>As this is a basic outline of how this architecture works for end users, if you are interested it is worth reading Microsoft’s blog post and documentation shared at the start of this blog.</p>
<h2 id="kali-on-the-new-distribution-architecture">Kali on the new distribution architecture</h2>
<p>After receiving the email from the WSL team in November, 2024, we immediately began to update our build scripts to utilize this new feature. We created the necessary files and a basic out of box experience (oobe) script for WSL to use. After building it and testing it, we were impressed on how easy it was to use.</p>
<p>After the new year started we began to convert our existing build pipeline to fully utilize the new features offered in WSL. We modified our build script to include all of the new files, changed our build box to rename the tarball output into a <code>.wsl</code> extension, and are now utilizing kali.download, our Cloudflare mirror, to distribute the new file.</p>
<h2 id="how-you-can-test-this-new-wsl">How you can test this new WSL</h2>
<p>The first thing you will need to do is be on the pre-release version of WSL. Run the following command in the Windows terminal:</p>
<pre tabindex="0"><code>wsl --update --pre-release
</code></pre><p>After this is installed, you should then be able to use <code>.wsl</code> files. To test this, go to our <a href="https://kali.download/wsl-images/current/">kali.download page</a> and download the <code>.wsl</code> file for your computer’s architecture. Likely this will be <strong>amd64</strong>.</p>
<p>Alternatively, you can run the following command in your Windows terminal:</p>
<pre tabindex="0"><code>wsl.exe --install kali-linux
</code></pre><p>We hope that you appreciate and enjoy this new development for WSL as much as we do. Who knows what the future has in store for Kali on WSL, you may just see some new more complete Kali installs with this new easy to install <code>.wsl</code> file.</p>
<h4 id="source"><a href="https://www.kali.org/blog/kali-linux-modern-wsl/">Source</a></h4>
<!-- raw HTML omitted -->

			</div>
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/2025-03-20-laser-harp-sets-the-tone/">Laser Harp Sets the Tone</a></li>
				
				<li><a href="/posts/2025-03-20-arduino-device-helps-split-the-g-on-a-p/">Arduino device helps split the G on a pint of Guinness</a></li>
				
				<li><a href="/posts/2025-03-20-the-70-best-early-amazon-spring-sale-ga/">The 70 best early Amazon Spring Sale gaming deals 2025</a></li>
				
				<li><a href="/posts/2025-03-20-tomorrow-and-tomorrow-and-tomorrow-info/">Tomorrow and tomorrow and tomorrow Information security and the Baseball Hall of Fame</a></li>
				
				<li><a href="/posts/2025-03-20-i-found-an-android-phone-that-can-convi/">I found an Android phone that can convince iPhone users to make the switch - and its not a flagship</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p>&copy; 2025 <a href="https://ghariib.ir/"><b>Alireza Gharib. All right reserved</b></a>.
	<a href="https://github.com/Gharib110"><b>Github</b></a>.
	</p>
</footer>

</body>
</html>
